<html>
<head>
	<meta charset="UTF-8">
	<title>闭包计数器</title>
	<script type="text/javascript">
/**
 * @CreateBy:   SublimeText3
 * @Author:     poetries
 * @DateTime:	2016-06-09 18:01:58
 */

//全局计数器  会受到全局变量污染
/*var num = 0;
function cnt(){
	return ++num;
}
alert(cnt());
alert(cnt());
alert(cnt());*/


//闭包计数器


/*function cnt(){
	var num = 0;//外界没有人能访问
	return function (){
		return ++num;
	}
}

var number = cnt();//返回一个匿名函数赋给number*/

// 简化写法  立即执行计数器 利用了表达式

var number = (function (){//匿名函数运行完了立即就丢了 这个函数仅仅是为了造出一个计数器函数 并且造了一个只有计数器函数能访问的局部变量
	var num = 0;//外界没有人能访问
	return function (){//事实上 return出来的函数被保留给某一个变量引用之后 这个变量就指向了这个函数 这个匿名函数还在  这个函数对应的上下文环境一律都不会被清空  内存会始终被占用着  这个整体的撒灰姑娘下文环境被打了一个包回来了  所以称为闭包
		return ++num;
	}
})();


alert(number());
alert(number());
alert(number());

	</script>
</head>
<body>
	
</body>
</html>