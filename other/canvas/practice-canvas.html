<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>practice-canvas</title>
		<style type="text/css">
			canvas{
				border: 1px solid blue;
			}
		</style>
	</head>
	<body>
		<canvas id="oCanvas" width="600" height="200">
			请升级你的浏览器
		</canvas>
		<form action="">
			<p>
				<label for="backgroundColor">请选择背景颜色</label>
				<select name="" id="backgroundColor">
					<option value="white">white</option>
					<option value="black">black</option>
				</select>
			</p>
			
			<p>
				<label for="shape">Circles Or squares</label>
				<select name="" id="shape">
					<option value="none" selected="selected">white</option>
					<option value="circles">circles</option>
					<option value="squares">squares</option>
				</select>
			</p>
			
			<p>
				<label for="foregroundColor">请选择文本颜色</label>
				<select name="" id="foregroundColor">
					<option value="white" >white</option>
					<option value="black" selected="selected">black</option>
				</select>
			</p>
			
			<p>
				<label for="tweets">Pick a tweets</label>
				<select name="" id="tweets">
					
				</select>
			</p>
			<p><input type="button" name="previewButton" id="previewButton" value="Preview" /></p>
		</form>
	</body>
	<script>
		window.onload = function(){
			var button = document.getElementById("previewButton");
			button.onclick = previewHandler;
		};
		function previewHandler(){

			var canvas = document.getElementById("oCanvas");
			var context = canvas.getContext("2d");
			fillBackgroundColor(canvas,context);
			var selectObj = document.getElementById("shape");
			var index = selectObj.selectedIndex;//selectedIndex 属性可设置或返回下拉列表中被选选项的索引号
			var shape = selectObj[index].value;
			
			if(shape == "squares"){//如果形状为squares 花20个形状
				for(var squares=0;squares < 20;squares++){
					drawSquare(canvas,context);
				}
			}else if(shape == "circles"){
				for(var circles=0;circles < 20;circles++){
					drawCircle(canvas,context);
				}
			}

		}
					
		function drawSquare(canvas,context){//传入画布和上下文
			//为方块指定一个随机的宽度 以及随机的x y
			var w = Math.floor(Math.random()*40);//选择40作为方块的大小 保证方块不过于太大
			var x = Math.floor(Math.random()*canvas.width);//让x介于0到画布宽度之间
			var y = Math.floor(Math.random()*canvas.height);
			
			context.fillStyle = "lightblue";
			context.fillRect(x,y,w,w);
		}
		function drawCircle(canvas,context){//传入画布和上下文
			
			var radius = Math.floor(Math.random()*40);
			var x = Math.floor(Math.random()*canvas.width);
			var y = Math.floor(Math.random()*canvas.height);
			
			context.beginPath();
			context.arc(x,y,radius,0,degreesToRadians(360),true);//true 逆时针画圆
			
			context.fillStyle = "lightblue";
			context.fill();
		}
		function fillBackgroundColor(canvas,context){
			var selectObj = document.getElementById("backgroundColor");
			var index = selectObj.selectedIndex;
			var bgColor = selectObj[index].value;
			context.fillStyle = bgColor;
			context.fillRect(0,0,canvas.width,canvas.height);
		}
		function degreesToRadians(degrees){
			return (degrees * Math.PI)/180;
		}
		
	</script>
</html>
